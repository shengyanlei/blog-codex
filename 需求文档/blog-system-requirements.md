# 博客系统需求文档

## 1. 产品概述

- **产品名称**：Codex Blog
- **产品类型**：可自部署、多作者、多主题的博客/内容管理系统
- **目标**：帮助个人开发者、内容创作者及中小团队以极低成本搭建品牌站点、发布内容、沉淀影响力

## 2. 目标与定位

- **核心价值**：提供开箱即用的创作体验 + 灵活的展示与扩展能力
- **市场定位**：介于轻量博客（Hexo/WP）和中型 CMS 之间，强调插件生态与运维友好
- **商业化空间**：可提供托管版本、主题/插件商城抽成、定制化开发服务

## 3. 用户画像 & 场景

| 角色         | 需求                                                             | 代表场景                                   |
| ------------ | ---------------------------------------------------------------- | ------------------------------------------ |
| 个人开发者   | Markdown 写作、技术文章归档、SEO、双语展示                       | 发布技术博客、开源项目更新日志             |
| 内容创作者   | 多媒体排版、草稿协作、互动反馈                                   | 写作专栏、作品展示、活动回顾               |
| 企业/团队运营 | 多作者协作、发布审核流程、数据统计、品牌定制                    | 公司官网文章、客户案例库                   |
| 访客读者     | 流畅浏览、互动评论、收藏订阅                                     | 订阅文章更新、参与讨论                     |

## 4. 功能需求

### 4.1 账号与权限

- 邮箱/手机号注册登录，支持第三方登录（GitHub/Google/微信）
- 角色：管理员 / 作者 / 访客；可扩展自定义角色
- 多因素认证、密码找回、登录日志、IP 限制

### 4.2 内容管理

- 富文本与 Markdown 双编辑器、自动保存、所见即所得预览
- 草稿箱、定时发布、版本历史（差异对比、回滚）
- 标签 / 分类 / 多语言支持、自定义摘要、文章置顶、元数据编辑
- 回收站、批量操作（发布、下线、删除）

### 4.3 媒体与资源

- 媒体库（图片、音视频、文件）分类管理、标签、搜索
- 支持批量上传、拖拽上传、图片压缩与裁剪、外链管理
- 媒体引用统计、防盗链配置、CDN/云存储适配

### 4.4 前台展示

- 首页文章流、Banner、置顶/精选模块、侧边栏组件（推荐、热门、公告）
- 文章详情：目录、标签、作者卡片、相关阅读、点赞、收藏、评论
- 标签页、分类页、归档页、作者主页、全文检索（标题+正文+标签）
- 多主题与暗/亮模式、自适应布局、PWA、阅读模式优化（字体、行距）

### 4.5 评论与互动

- 内置评论系统 + 第三方接入（Disqus、Gitalk、Twikoo 等）
- 楼层结构、@回复、表情、附件/图片（受限）
- 敏感词过滤、垃圾评论自动拦截（规则 + 机器学习）
- 评论审核、置顶、拉黑、邮件提醒

### 4.6 SEO 与分享

- 自定义 URL Slug、Meta Title/Description/Keywords
- 自动生成站点地图（XML）、RSS/Atom 输出
- Open Graph、Twitter Card、微信分享卡片、社交分享按钮
- 结构化数据（JSON-LD）配置

### 4.7 通知与订阅

- 站内通知（系统消息、评论回复、审核结果）
- 邮件订阅（文章发布、周报、系统公告）与退订机制
- Webhook、RSS、Newsletter 集成

### 4.8 统计与分析

- PV/UV、阅读时长、跳出率、互动数据（点赞/评论/收藏）
- 流量来源分析、热门文章榜、搜索关键词统计
- 数据可视化图表、导出 CSV、API 拉取

### 4.9 运维与配置

- 站点信息、导航、域名绑定、语言/时区
- 主题管理（上传、启用、配置）、插件中心（安装/启用/更新/卸载）
- 备份/恢复（手动+定时）、日志查看、灰度发布、Webhooks、API Token 管理
- 安全配置（白名单、跨域、内容审核）

### 4.10 扩展生态

- 主题/插件市场，支持评分、评论、版本升级提醒
- 插件生命周期钩子（安装/启用/停用/卸载）、依赖校验
- 自定义 CSS/JS 注入、页面插槽

## 5. 非功能需求

- **性能**：首屏 < 2s、TTFB < 200ms、并发 1000 req/s 可水平扩展、图片懒加载与 CDN 加速
- **安全**：HTTPS 强制、CSRF/XSS/SQL 注入防护、内容审核、权限审计日志、敏感数据加密
- **可用性**：SLA 99.9%、多副本备份、容灾切换、自动扩缩容、日志监控+告警
- **可扩展性**：模块化架构、REST + GraphQL API、Webhook、自定义字段
- **可维护性**：自动化测试覆盖率 ≥80%、CI/CD、配置中心、分环境配置

## 6. 用户流程（高层）

1. 注册/登录 → 完善个人资料 → 创建文章草稿
2. 上传媒体 → 预览并提交审核（可选） → 发布上线
3. 分享推广（社交、RSS、邮件）→ 接收评论与通知 → 通过统计面板优化内容
4. 管理员：初始化站点 → 配置主题插件 → 邀请作者 → 审核与运维

## 7. 页面与模块

- **前台**
  - 首页：Banner、文章流、侧边栏组件
  - 分类/标签页：列表、筛选、订阅按钮
  - 文章详情：目录、正文、互动模块、推荐阅读
  - 作者主页：作者简介、文章列表、社交链接
  - 搜索结果、归档、登录/注册、404/500
- **后台**
  - 仪表盘：数据概览、快捷入口
  - 文章管理：列表、筛选、批量操作、编辑器
  - 媒体库、评论管理、用户与角色、主题插件管理、系统设置、通知中心、日志中心

## 8. 核心数据结构（示例）

| 实体   | 关键字段                                                                               |
| ------ | -------------------------------------------------------------------------------------- |
| 用户   | id、昵称、邮箱/手机号、角色、状态、最后登录、MFA 开关、社交绑定                       |
| 文章   | id、标题、slug、作者 id、状态、发布时间、内容（Markdown/HTML）、摘要、标签、分类、SEO、统计 |
| 评论   | id、文章 id、父级 id、作者信息、内容、状态、点赞数、来源 ip                           |
| 媒体   | id、文件名、类型、URL、尺寸、引用计数、归属文章                                       |
| 主题   | id、名称、版本、配置 JSON、开发者、状态、依赖                                         |
| 统计   | id、文章 id、PV、UV、来源、事件、时间戳                                               |

## 9. 里程碑规划

| 阶段 | 范围                                                                                           |
| ---- | ---------------------------------------------------------------------------------------------- |
| M1   | 账号体系、文章 CRUD、前台展示、基础评论、SEO 基础、部署脚本                                    |
| M1.1   | 优先实现个人开发者记录blog的功能                                  |
| M2   | 媒体库、统计面板、通知系统、主题管理、基础插件接口                                            |
| M3   | 插件/主题市场、API & Webhook、备份恢复、灰度发布、内容审核、生态合作                          |

## 10. KPI / 成功标准（参考）

- 站点搭建耗时 < 30 分钟；月活作者 ≥ 1000；主题/插件安装量 ≥ 500
- 博文发布成功率 ≥ 99%；核心功能 0 P1 Bug
- SEO：站点平均搜索排名提升 20%，RSS 订阅转化率 ≥ 5%

## 11. 后续扩展
- 支持 docker一键部署
- 提供ai接口，使用户可以使用ai功能完善blog内容及提供文档检查的功能
- 
---

如需进一步的原型、用户故事、优先级矩阵，可在此文档基础上细化。
